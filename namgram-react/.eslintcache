<<<<<<< HEAD
[{"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\SinglePost.tsx":"1","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\posts.ts":"2","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\auth\\actions.ts":"3","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\auth\\reducer.ts":"4","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\auth.ts":"5","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\chat\\MessageArea.tsx":"6","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Post.tsx":"7","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\posts\\actions.ts":"8","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Hot.tsx":"9","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Commented.tsx":"10","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\navigation\\Navbar.tsx":"11","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\chat.ts":"12","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\chat\\actions.ts":"13","C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\index.tsx":"14"},{"size":1196,"mtime":1611333779495,"results":"15","hashOfConfig":"16"},{"size":3968,"mtime":1611340435857,"results":"17","hashOfConfig":"16"},{"size":4949,"mtime":1611334306385,"results":"18","hashOfConfig":"16"},{"size":1035,"mtime":1611141643925,"results":"19","hashOfConfig":"16"},{"size":708,"mtime":1611325427288,"results":"20","hashOfConfig":"16"},{"size":3746,"mtime":1611141643912,"results":"21","hashOfConfig":"16"},{"size":14483,"mtime":1611325587067,"results":"22","hashOfConfig":"16"},{"size":2633,"mtime":1611340507724,"results":"23","hashOfConfig":"16"},{"size":1509,"mtime":1611340561018,"results":"24","hashOfConfig":"16"},{"size":1629,"mtime":1611340553946,"results":"25","hashOfConfig":"16"},{"size":14920,"mtime":1611340812297,"results":"26","hashOfConfig":"16"},{"size":645,"mtime":1611342092695,"results":"27","hashOfConfig":"16"},{"size":3010,"mtime":1611342425670,"results":"28","hashOfConfig":"16"},{"size":1371,"mtime":1611141643921,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"mizlvw",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\SinglePost.tsx",["60","61"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\posts.ts",[],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\auth\\actions.ts",["62","63","64"],"import {\r\n  IAuth,\r\n  ISignin,\r\n  ISigninRes,\r\n  ISignup,\r\n  ISignupRes,\r\n} from \"../../models/auth\";\r\nimport { signin, signup } from \"../../services/auth\";\r\nimport {\r\n  SET_ERROR,\r\n  CLEAR_ERROR,\r\n  START_LOADING,\r\n  STOP_LOADING,\r\n} from \"../ui/actions\";\r\n\r\nimport jwtDecode from \"jwt-decode\";\r\nimport axios, { AxiosError } from \"axios\";\r\nimport io from \"socket.io-client\";\r\nimport { getUserById } from \"../../services/user\";\r\nimport { getFollowers, getFollowing } from \"../../services/profile\";\r\nimport { INotification } from \"../../models/post\";\r\nimport { messageReceived, NEW_MESSAGE } from \"../chat/actions\";\r\n\r\nexport const SET_AUTH = \"SET_AUTH\";\r\nexport const CLEAR_AUTH = \"CLEAR_AUTH\";\r\nexport const SET_SOCKET = \"SET_SOCKET\";\r\n\r\nexport const ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\r\nexport const CLEAR_NOTIFICATIONS = \"CLEAR_NOTIFICATIONS\";\r\n\r\nexport interface SetAuthAction {\r\n  type: typeof SET_AUTH;\r\n  payload: IAuth;\r\n}\r\n\r\nexport interface ClearAuthAction {\r\n  type: typeof CLEAR_AUTH;\r\n}\r\n\r\nexport interface SetSocketAction {\r\n  type: typeof SET_SOCKET;\r\n  payload: SocketIOClient.Socket;\r\n}\r\n\r\nexport interface AddNotificationsAction {\r\n  type: typeof ADD_NOTIFICATION;\r\n  payload: INotification;\r\n}\r\n\r\nexport interface ClearNotificationsAction {\r\n  type: typeof CLEAR_NOTIFICATIONS;\r\n}\r\n\r\nexport type AuthActionTypes =\r\n  | SetAuthAction\r\n  | ClearAuthAction\r\n  | SetSocketAction\r\n  | AddNotificationsAction\r\n  | ClearNotificationsAction;\r\n\r\nexport const authUser = () => (dispatch: any) => {\r\n  const token = localStorage.TOKEN;\r\n  if (token) {\r\n    const decodedToken: { id: string; username: string } = jwtDecode(token);\r\n    Promise.all([\r\n      getUserById(decodedToken.id),\r\n      getFollowers(decodedToken.username),\r\n      getFollowing(decodedToken.username),\r\n    ])\r\n      .then((res) => {\r\n        const user = res[0].Data;\r\n        const followers = res[1];\r\n        const following = res[2];\r\n\r\n        const socket = io(\"ws://localhost:8000\", {\r\n          query: `userId=${user.id}`,\r\n        });\r\n        //Da se poradi\r\n        socket.on(\"liked\", (message: { post: string; liker: string }) => {\r\n          dispatch({\r\n            type: ADD_NOTIFICATION,\r\n            payload: { post: message.post, liker: message.liker },\r\n          });\r\n        });\r\n        socket.on(\r\n          \"newMessage\",\r\n          (message: { from: string; to: string; body: string }) => {\r\n            dispatch(messageReceived(message.from, message.to, message.body));\r\n          }\r\n        );\r\n        dispatch({ type: SET_SOCKET, payload: socket });\r\n\r\n        dispatch({\r\n          type: SET_AUTH,\r\n          payload: { ...user, followers, following },\r\n        });\r\n        axios.defaults.headers.common[\"Authorization\"] = token;\r\n      })\r\n      .catch((err) => console.log(\"Bad token\"));\r\n  }\r\n};\r\n\r\nexport const signinAction = (user: ISignin) => (dispatch: any) => {\r\n  dispatch({ type: START_LOADING });\r\n  dispatch({ type: CLEAR_ERROR });\r\n  signin(user)\r\n    .then((res: ISigninRes) => {\r\n      dispatch({ type: CLEAR_ERROR });\r\n      const token = `Bearer ${(res as ISigninRes).AuthToken}`;\r\n      window.localStorage.setItem(\"TOKEN\", token);\r\n      axios.defaults.headers.common[\"Authorization\"] = token;\r\n      const decodedToken: IAuth = jwtDecode(token);\r\n\r\n      dispatch(authUser());\r\n\r\n      //dispatch({type: SET_AUTH, payload: decodedToken})\r\n      dispatch({ type: STOP_LOADING });\r\n    })\r\n    .catch((err: AxiosError) => {\r\n      dispatch({ type: STOP_LOADING });\r\n      if (err.request) {\r\n        dispatch({ type: SET_ERROR, payload: `${err.request.response}` });\r\n      } else if (err.response) {\r\n        dispatch({ type: SET_ERROR, payload: `${err.response.data}` });\r\n      } else {\r\n        console.log(err);\r\n      }\r\n    });\r\n};\r\n\r\nexport const signupAction = (user: ISignup) => (dispatch: any) => {\r\n  dispatch({ type: START_LOADING });\r\n  dispatch({ type: CLEAR_ERROR });\r\n  signup(user)\r\n    .then((res: ISignupRes) => {\r\n      dispatch({ type: CLEAR_ERROR });\r\n      const token = `Bearer ${(res as ISigninRes).AuthToken}`;\r\n      window.localStorage.setItem(\"TOKEN\", token);\r\n      axios.defaults.headers.common[\"Authorization\"] = token;\r\n      const decodedToken: IAuth = jwtDecode(token);\r\n      dispatch(authUser());\r\n      // dispatch({type: SET_AUTH, payload: decodedToken})\r\n      dispatch({ type: STOP_LOADING });\r\n    })\r\n    .catch((err: AxiosError) => {\r\n      dispatch({ type: STOP_LOADING });\r\n      if (err.request) {\r\n        dispatch({ type: SET_ERROR, payload: `${err.request.response}` });\r\n      } else if (err.response) {\r\n        dispatch({ type: SET_ERROR, payload: `${err.response.data}` });\r\n      } else {\r\n        console.log(err);\r\n      }\r\n    });\r\n};\r\n\r\nexport const logoutAction = () => (dispatch: any) => {\r\n  localStorage.removeItem(\"TOKEN\");\r\n  delete axios.defaults.headers.common[\"Authorization\"];\r\n  dispatch({ type: CLEAR_AUTH });\r\n  window.location.href = \"/\";\r\n};\r\n",["65","66"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\auth\\reducer.ts",["67"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\auth.ts",[],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\chat\\MessageArea.tsx",["68"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Post.tsx",[],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\posts\\actions.ts",["69","70"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Hot.tsx",["71"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\posts\\Commented.tsx",["72"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\components\\navigation\\Navbar.tsx",["73"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\services\\chat.ts",[],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\redux\\chat\\actions.ts",["74"],"C:\\Users\\zlatk\\Desktop\\namgram\\namgram-react\\src\\index.tsx",[],{"ruleId":"75","severity":1,"message":"76","line":17,"column":9,"nodeType":"77","messageId":"78","endLine":17,"endColumn":16},{"ruleId":"79","severity":1,"message":"80","line":26,"column":6,"nodeType":"81","endLine":26,"endColumn":8,"suggestions":"82"},{"ruleId":"75","severity":1,"message":"83","line":22,"column":27,"nodeType":"77","messageId":"78","endLine":22,"endColumn":38},{"ruleId":"75","severity":1,"message":"84","line":112,"column":13,"nodeType":"77","messageId":"78","endLine":112,"endColumn":32},{"ruleId":"75","severity":1,"message":"84","line":140,"column":13,"nodeType":"77","messageId":"78","endLine":140,"endColumn":32},{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","severity":1,"message":"90","line":24,"column":1,"nodeType":"91","endLine":42,"endColumn":3},{"ruleId":"79","severity":1,"message":"92","line":77,"column":6,"nodeType":"81","endLine":77,"endColumn":22,"suggestions":"93"},{"ruleId":"75","severity":1,"message":"94","line":1,"column":18,"nodeType":"77","messageId":"78","endLine":1,"endColumn":23},{"ruleId":"75","severity":1,"message":"95","line":2,"column":10,"nodeType":"77","messageId":"78","endLine":2,"endColumn":15},{"ruleId":"79","severity":1,"message":"92","line":35,"column":6,"nodeType":"81","endLine":35,"endColumn":12,"suggestions":"96"},{"ruleId":"79","severity":1,"message":"92","line":35,"column":8,"nodeType":"81","endLine":35,"endColumn":14,"suggestions":"97"},{"ruleId":"75","severity":1,"message":"98","line":217,"column":9,"nodeType":"77","messageId":"78","endLine":217,"endColumn":38},{"ruleId":"75","severity":1,"message":"99","line":1,"column":10,"nodeType":"77","messageId":"78","endLine":1,"endColumn":19},"@typescript-eslint/no-unused-vars","'loading' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'dispatch' and 'id'. Either include them or remove the dependency array.","ArrayExpression",["100"],"'NEW_MESSAGE' is defined but never used.","'decodedToken' is assigned a value but never used.","no-native-reassign",["101"],"no-negated-in-lhs",["102"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.",["103"],"'IPost' is defined but never used.","'IUser' is defined but never used.",["104"],["105"],"'handleCloseNotificationAnchor' is assigned a value but never used.","'RootState' is defined but never used.",{"desc":"106","fix":"107"},"no-global-assign","no-unsafe-negation",{"desc":"108","fix":"109"},{"desc":"110","fix":"111"},{"desc":"110","fix":"112"},"Update the dependencies array to be: [dispatch, id]",{"range":"113","text":"114"},"Update the dependencies array to be: [auth, dispatch, username]",{"range":"115","text":"116"},"Update the dependencies array to be: [auth, dispatch]",{"range":"117","text":"118"},{"range":"119","text":"118"},[951,953],"[dispatch, id]",[2260,2276],"[auth, dispatch, username]",[954,960],"[auth, dispatch]",[1026,1032]]
=======
[{"E:\\Факултет\\IV godina\\VII Semestar\\Napredne Baze Podataka\\Miljana 1\\namgram\\namgram-react\\src\\redux\\chat\\actions.ts":"1"},{"size":3106,"mtime":1611344464860,"results":"2","hashOfConfig":"3"},{"filePath":"4","messages":"5","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1w7ye4h","E:\\Факултет\\IV godina\\VII Semestar\\Napredne Baze Podataka\\Miljana 1\\namgram\\namgram-react\\src\\redux\\chat\\actions.ts",["6"],{"ruleId":"7","severity":1,"message":"8","line":84,"column":14,"nodeType":"9","messageId":"10","endLine":84,"endColumn":21},"@typescript-eslint/no-unused-vars","'chatter' is assigned a value but never used.","Identifier","unusedVar"]
>>>>>>> c5a8025c85419b1d95b158bd3ee005f740562b99
